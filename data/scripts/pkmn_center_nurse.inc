.equ SECOND_NURSE_CHANGE_NATURE_PRICE, 1000
.equ SECOND_NURSE_CHANGE_ABILITY_PRICE, 1000
.equ SECOND_NURSE_RESETEV_PRICE, 500

EventScript_PkmnCenterNurse::
	goto EventScript_PkmnCenterNurse_HealPkmn
	end

EventScript_PkmnCenterNurse_HealPkmn::
	call EventScript_PkmnCenterNurse_TakeAndHealPkmn
	special SetUsedPkmnCenterQuestLogEvent
	goto EventScript_PkmnCenterNurse_CheckTrainerTowerAndUnionRoom
	end

EventScript_PkmnCenterNurse_TakeAndHealPkmn::
	applymovement VAR_LAST_TALKED, Common_Movement_WalkInPlaceFasterLeft
	waitmovement 0
	dofieldeffect FLDEFF_POKECENTER_HEAL
	waitfieldeffect FLDEFF_POKECENTER_HEAL
	applymovement VAR_LAST_TALKED, Common_Movement_WalkInPlaceFasterDown
	waitmovement 0
	special HealPlayerParty
	return

EventScript_PkmnCenterNurse_CheckTrainerTowerAndUnionRoom::
	specialvar VAR_RESULT, IsPlayerNotInTrainerTowerLobby
	goto_if_eq VAR_RESULT, FALSE, EventScript_PkmnCenterNurse_ReturnPkmn
	specialvar VAR_RESULT, BufferUnionRoomPlayerName
	copyvar VAR_0x8008, VAR_RESULT
	goto_if_eq VAR_0x8008, 0, EventScript_PkmnCenterNurse_ReturnPkmn
	goto_if_eq VAR_0x8008, 1, EventScript_PkmnCenterNurse_PlayerWaitingInUionRoom
	end

EventScript_PkmnCenterNurse_ReturnPkmn::
	applymovement VAR_LAST_TALKED, Movement_Bow
	waitmovement 0
	goto EventScript_PkmnCenterNurse_PlayerTurn
	return

EventScript_PkmnCenterNurse_PlayerWaitingInUionRoom::
	goto_if_set FLAG_SYS_INFORMED_OF_LOCAL_WIRELESS_PLAYER, EventScript_PkmnCenterNurse_ReturnPkmn
	msgbox Text_RestoredPkmnToFullHealth
	setflag FLAG_SYS_INFORMED_OF_LOCAL_WIRELESS_PLAYER
	message Text_PlayerIsPlayingRightNowGoForIt
	waitmessage
	applymovement VAR_LAST_TALKED, Movement_Bow
	waitmovement 0
	msgbox Text_WeHopeToSeeYouAgain
	return

EventScript_PkmnCenterNurse_Goodbye::
	msgbox Text_WeHopeToSeeYouAgain
	return

EventScript_PkmnCenterNurse_PlayerTurn::
    applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_FaceDown
    waitmovement 0
    release
    end

Movement_Bow::
	nurse_joy_bow
	delay_4
	step_end

EventScript_PkmnCenterNurse_SecondNurse::
	message Text_SecondNurse
	waitmessage
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE, FALSE
	switch VAR_RESULT
	case 0, EventScript_PkmnCenterNurse_SecondNurse_ChangeNature
	case 1, EventScript_PkmnCenterNurse_SecondNurse_ChangeAbility
	case 2, EventScript_PkmnCenterNurse_SecondNurse_ResetEVs
	case 3, EventScript_PkmnCenterNurse_SecondNurse_Cancel
	releaseall
	end

EventScript_PkmnCenterNurse_SecondNurse_CheckMoney::
	goto EventScript_PkmnCenterNurse_SecondNurse
	end

EventScript_PkmnCenterNurse_SecondNurse_NotEnoughMoney::
	msgbox Text_SecondNurse_NotEnoughMoney, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_ChangeNature::
	checkmoney SECOND_NURSE_CHANGE_NATURE_PRICE
	goto_if_eq VAR_RESULT, FALSE, EventScript_PkmnCenterNurse_SecondNurse_NotEnoughMoney
	msgbox Text_SecondNurse_SelectMon, MSGBOX_NPC
	special ChoosePartyMon
	waitstate
	compare VAR_0x8004, PARTY_SIZE
	goto_if_ge EventScript_PkmnCenterNurse_SecondNurse_Cancel
	specialvar VAR_RESULT, GetPartyMonSpecies
	compare VAR_RESULT, SPECIES_EGG
	goto_if_eq EventScript_PkmnCenterNurse_SecondNurse_NoEgg
	goto EventScript_PkmnCenterNurse_SecondNurse_ChooseNature
	end

EventScript_PkmnCenterNurse_SecondNurse_ChangeAbility::
	checkmoney SECOND_NURSE_CHANGE_ABILITY_PRICE
	goto_if_eq VAR_RESULT, FALSE, EventScript_PkmnCenterNurse_SecondNurse_NotEnoughMoney
	msgbox Text_SecondNurse_SelectMon, MSGBOX_NPC
	special ChoosePartyMon
	waitstate
	compare VAR_0x8004, PARTY_SIZE
	goto_if_ge EventScript_PkmnCenterNurse_SecondNurse_Cancel
	specialvar VAR_RESULT, GetPartyMonSpecies
	compare VAR_RESULT, SPECIES_EGG
	goto_if_eq EventScript_PkmnCenterNurse_SecondNurse_NoEgg
	goto_if_eq VAR_RESULT, 1, EventScript_PkmnCenterNurse_SecondNurse_NoOtherAbilities
	goto EventScript_PkmnCenterNurse_SecondNurse_SwitchAbility
	end

EventScript_PkmnCenterNurse_SecondNurse_NoOtherAbilities
	msgbox Text_SecondNurse_NoOtherAbilities, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_SwitchAbility
	special SwitchAbility
	removemoney SECOND_NURSE_CHANGE_ABILITY_PRICE
	msgbox Text_SecondNurse_AbilityChanged, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_ResetEVs::
	checkmoney SECOND_NURSE_RESETEV_PRICE
	goto_if_eq VAR_RESULT, FALSE, EventScript_PkmnCenterNurse_SecondNurse_NotEnoughMoney
	msgbox Text_SecondNurse_SelectMon, MSGBOX_NPC
	special ChoosePartyMon
	waitstate
	compare VAR_0x8004, PARTY_SIZE
	goto_if_ge EventScript_PkmnCenterNurse_SecondNurse_Cancel
	specialvar VAR_RESULT, GetPartyMonSpecies
	compare VAR_RESULT, SPECIES_EGG
	goto_if_eq EventScript_PkmnCenterNurse_SecondNurse_NoEgg
	goto EventScript_PkmnCenterNurse_SecondNurse_ChooseEVstat
	end

EventScript_PkmnCenterNurse_SecondNurse_Cancel::
	msgbox Text_SecondNurse_ComebackAnytime, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_NoEgg::
	msgbox Text_SecondNurse_NoEgg, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature::
	message Text_SecondNurse_ChooseNature
	waitmessage
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_CATEGORIES, TRUE
	copyvar VAR_0x8007, VAR_RESULT
	switch VAR_RESULT
	case 0, EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Attack
	case 1, EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Defense
	case 2, EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Speed
	case 3, EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_SpAttack
	case 4, EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_SpDefense
	releaseall
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Attack::
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_ATTACK, TRUE
	switch VAR_RESULT
	case 5, EventScript_PkmnCenterNurse_SecondNurse_Cancel

	goto EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Defense::
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_DEFENSE, TRUE
	switch VAR_RESULT
	case 5, EventScript_PkmnCenterNurse_SecondNurse_Cancel

	goto EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_SpAttack::
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_SPATTACK, TRUE
	switch VAR_RESULT
	case 5, EventScript_PkmnCenterNurse_SecondNurse_Cancel

	goto EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_SpDefense::
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_SPDEFENSE, TRUE
	switch VAR_RESULT
	case 5, EventScript_PkmnCenterNurse_SecondNurse_Cancel

	goto EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseNature_Speed::
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_NATURE_SPEED, TRUE
	switch VAR_RESULT
	case 5, EventScript_PkmnCenterNurse_SecondNurse_Cancel

	goto EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange
	end

EventScript_PkmnCenterNurse_SecondNurse_DoNatureChange::
	special ChangeNature
	removemoney SECOND_NURSE_CHANGE_NATURE_PRICE
	msgbox Text_SecondNurse_NatureChanged, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_DoReset::
	specialvar VAR_RESULT, ResetMonEVs
	goto_if_eq VAR_RESULT, TRUE, EventScript_PkmnCenterNurse_SecondNurse_FinishReset
	msgbox Text_SecondNurse_NothingToReset, MSGBOX_NPC 
	end

EventScript_PkmnCenterNurse_SecondNurse_FinishReset::
	removemoney SECOND_NURSE_RESETEV_PRICE
	msgbox Text_SecondNurse_ResetEVs, MSGBOX_NPC
	end

EventScript_PkmnCenterNurse_SecondNurse_ChooseEVstat::
	message Text_SecondNurse_ChooseStat
	waitmessage
	multichoice 0, 0, MULTICHOICE_SECOND_NURSE_STATS, TRUE
	goto_if_eq VAR_RESULT, 6, EventScript_PkmnCenterNurse_SecondNurse_Cancel
	goto EventScript_PkmnCenterNurse_SecondNurse_DoReset
	end
